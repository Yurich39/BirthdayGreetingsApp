# birthday greetings server

Проект веб-сервиса написан по принципу "чистой" архитектуры.

## Описание

Проект "birthday greetings server" позволяет работникам подписываться на уведомления о днях рождения других сотрудников.
В качестве хранилища данных используется БД PostgreSQL.

Проект запускается в докер контейнерах: контейнер app с http-сервером и контейнер postgres с базой данных.

Реализованный в проекте web-сервер позволяет пользователю без аутентификации:
- 1.Искать сотрудников в БД по имени или фамилии
- 2.Возможность подписаться/отписаться от оповещения о дне рождения сотрудника
- 3.Получать список сотрудников, на которых оформлена подписка
- 4.Получать список сотрудников из подписок, у которых сегодня день рождения

Реализованный в проекте web-сервер позволяет администратору (требуется регистрация):
- 1.Добавлять информацию в БД о новых сотрудниках (имя, фамилия, пол, возраст, дата рождения, email)
- 2.Изменять информацию о сотрудниках в БД
- 3.Удалять информацию о сотрудниках из БД

__Алгоритм установки и запуска проекта:__
Проект упакован в два докер контейнера:
- **app** - web-сервер, написанный на Go 1.20
- **postgres** - postgresql db

Для запуска проекта используется make файл.

Запуск проекта в Docker контейнерах:
```sh
$ make compose-up
```
Так же в Makefile проекта доступны и прочие вспомагательные функции.

## База данных
База данных PostgreSQL.
Сервер работает только с одной БД.
Сервер работает с двумя таблицами в БД: "employees", "subscribers".

При первом запуске проекта путем миграции будет создана структура БД.
В данной структуре таблицы subscribers установлена связь one to many. Каждая запись в таблице subscribers связывает одного сотрудника (определяемого через employee_id) с одним или более другими сотрудниками (определяемыми через subscribed_to_id). Таким образом, у одного сотрудника может быть много подписок на других сотрудников.

Таблица "employees" состоит из следующих полей:
"id" (Pk) int, "name" text, "surname" text, "gender" text, "age" int, date_of_birth" date

Таблица "subscribers" состоит из следующих полей:
"id" (Pk) int, "employee_id" (FK) int, "subscribed_to_id" (FK) int

## `Логирование`
Логирование с использованием slog. Уровни логирования отличаются в зависимости от того, запущен проект локально, в режиме dev или в продакшене. По дефолту установлен локальный уровень.
Подробнее тут: pkg/logger/logger.go